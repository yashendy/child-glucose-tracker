<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆØ¬Ø¨Ø©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #FFFDE7;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #FFEB3B;
      padding: 15px;
      text-align: center;
      font-size: 24px;
      color: #333;
      font-weight: bold;
    }

    .container {
      display: flex;
      flex-direction: row-reverse;
      padding: 20px;
    }

    .meals-list {
      width: 25%;
      padding: 20px;
      background-color: #FFF9C4;
      border-left: 2px dashed #FF9800;
    }

    .meals-list h3 {
      color: #FF5722;
    }

    .meals-list button {
      display: block;
      margin: 10px 0;
      padding: 10px;
      width: 100%;
      font-size: 18px;
      background-color: #FFD54F;
      border: none;
      cursor: pointer;
      border-radius: 8px;
    }

    .meal-content {
      width: 75%;
      padding: 20px;
    }

    .food-card {
      display: flex;
      align-items: center;
      background: #FFF8E1;
      border: 2px solid #FFD54F;
      margin-bottom: 15px;
      padding: 15px;
      border-radius: 12px;
    }

    .food-card img {
      width: 60px;
      margin-left: 15px;
    }

    .food-card input[type="number"] {
      width: 60px;
      margin: 0 10px;
      padding: 5px;
    }

    #totalCarbs, #insulinDose {
      font-size: 20px;
      margin-top: 20px;
      color: #4CAF50;
    }

    button.save-btn {
      background-color: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      margin-top: 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>ğŸ½ï¸ Ø§Ø®ØªØ± ÙˆØ¬Ø¨ØªÙƒ ÙˆÙƒÙ…ÙŠØ© Ø§Ù„Ø·Ø¹Ø§Ù…</header>

<div class="container">
  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰ -->
  <div class="meals-list">
    <h3>Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</h3>
    <button onclick="selectMeal('Ø§Ù„ÙØ·ÙˆØ±')">ğŸ³ Ø§Ù„ÙØ·ÙˆØ±</button>
    <button onclick="selectMeal('Ø§Ù„ØºØ¯Ø§Ø¡')">ğŸ— Ø§Ù„ØºØ¯Ø§Ø¡</button>
    <button onclick="selectMeal('Ø§Ù„Ø¹Ø´Ø§Ø¡')">ğŸ² Ø§Ù„Ø¹Ø´Ø§Ø¡</button>
  </div>

  <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙˆØ¬Ø¨Ø© -->
  <div class="meal-content" id="mealContent">
    <h2 id="mealTitle">Ø§Ø®ØªØ± Ø§Ù„ÙˆØ¬Ø¨Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h2>
    <div id="foodOptions"></div>

    <div id="totalCarbs"></div>
    <div id="insulinDose"></div>
    <button class="save-btn" onclick="saveMeasurement()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠØ§Ø³</button>
  </div>
</div>

<!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø¹Ø§Ù… -->
<script>
  const foods = {
    "Ø¨ÙŠØ¶": { "ØªØµÙ†ÙŠÙ": "Ø¨Ø±ÙˆØªÙŠÙ†", "ÙƒØ§Ø±Ø¨": 1, "ØµÙˆØ±Ø©": "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
    "Ø¹ÙŠØ´": { "ØªØµÙ†ÙŠÙ": "Ù†Ø´ÙˆÙŠØ§Øª", "ÙƒØ§Ø±Ø¨": 50, "ØµÙˆØ±Ø©": "https://cdn-icons-png.flaticon.com/512/135/135620.png" },
    "Ù…ÙˆØ²": { "ØªØµÙ†ÙŠÙ": "ÙÙˆØ§ÙƒÙ‡", "ÙƒØ§Ø±Ø¨": 23, "ØµÙˆØ±Ø©": "https://cdn-icons-png.flaticon.com/512/590/590685.png" },
    "Ø¬Ø¨Ù†Ø©": { "ØªØµÙ†ÙŠÙ": "Ø¨Ø±ÙˆØªÙŠÙ†", "ÙƒØ§Ø±Ø¨": 2, "ØµÙˆØ±Ø©": "https://cdn-icons-png.flaticon.com/512/1046/1046784.png" }
  };

  let selectedMeal = '';
  let childICR = 12; // Ø³ÙŠØªÙ… Ø¬Ù„Ø¨Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…Ù† Firebase
  let selectedFoods = {};

  function selectMeal(mealName) {
    selectedMeal = mealName;
    document.getElementById('mealTitle').textContent = `Ø§Ù„ÙˆØ¬Ø¨Ø©: ${mealName}`;
    const container = document.getElementById('foodOptions');
    container.innerHTML = '';

    for (let food in foods) {
      const item = foods[food];
      const card = document.createElement('div');
      card.className = 'food-card';
      card.innerHTML = `
        <img src="${item.ØµÙˆØ±Ø©}" alt="${food}">
        <strong>${food} (${item.ØªØµÙ†ÙŠÙ})</strong>
        <input type="number" placeholder="Ø¬Ù…" min="0" onchange="updateFood('${food}', this.value)">
        <span>Ø¬Ù…</span>
      `;
      container.appendChild(card);
    }

    updateResults();
  }

  function updateFood(food, qty) {
    if (qty > 0) {
      selectedFoods[food] = Number(qty);
    } else {
      delete selectedFoods[food];
    }
    updateResults();
  }

  function updateResults() {
    let total = 0;
    for (let food in selectedFoods) {
      let qty = selectedFoods[food];
      let carbPer100 = foods[food].ÙƒØ§Ø±Ø¨;
      total += (carbPer100 / 100) * qty;
    }

    let dose = (total / childICR).toFixed(1);

    document.getElementById('totalCarbs').textContent = `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª: ${total.toFixed(1)} Ø¬Ù…`;
    document.getElementById('insulinDose').textContent = `Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©: ${dose} ÙˆØ­Ø¯Ø©`;
  }

  function saveMeasurement() {
    alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠØ§Ø³ (Ø³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡ Ø¨Ù€ Firebase Ù„Ø§Ø­Ù‚Ù‹Ø§)");
  }
</script>

</body>
</html>

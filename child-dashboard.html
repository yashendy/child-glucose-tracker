<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Ù„ÙˆØ­Ø© Ø·ÙÙ„ - Ù…ØªØ§Ø¨Ø¹Ø© Ø³ÙƒØ± Ø§Ù„Ø£Ø·ÙØ§Ù„</title>
  <style>
    :root {
      --brand: #0ea5e9;
      --brand2: #6ee7b7;
      --line: #e5e7eb;
      --ink: #0f172a;
      --muted: #6b7280;
      --bg: #f6fbff;
      --card: #fff;
      --chip: #eef6ff
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Tajawal', sans-serif;
      background: var(--bg);
      color: var(--ink);
      display: flex;
    }

    .sidebar {
      width: 240px;
      background: linear-gradient(180deg, var(--brand), var(--brand2));
      color: white;
      padding: 20px;
      min-height: 100vh;
    }

    .sidebar h3 {
      font-size: 20px;
      margin-bottom: 20px;
    }

    .sidebar-btn {
      display: block;
      width: 100%;
      text-align: right;
      background: transparent;
      border: none;
      color: white;
      padding: 12px;
      margin: 6px 0;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.2s;
    }

    .sidebar-btn:hover, .sidebar-btn.active {
      background: rgba(255,255,255,0.15);
    }

    main {
      flex: 1;
      padding: 20px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--line);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 1px 6px rgba(0,0,0,0.05);
    }

    .note {
      font-size: 15px;
      color: var(--muted);
    }

  </style>
</head>
<body>

<!-- âœ… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
<div class="sidebar">
  <h3>ğŸ‘§ Ù„ÙˆØ­Ø© Ø§Ù„Ø·ÙÙ„</h3>
  <button class="sidebar-btn active" data-section="home">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button class="sidebar-btn" data-section="info">âš™ï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</button>
  <button class="sidebar-btn" data-section="measure">ğŸ“ Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø³ÙƒØ±</button>
  <button class="sidebar-btn" data-section="meals">ğŸ½ï¸ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</button>
  <button class="sidebar-btn" data-section="reports">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
  <button class="sidebar-btn" data-section="doctor">ğŸ§‘â€âš•ï¸ Ø§Ù„Ø·Ø¨ÙŠØ¨</button>
  <button class="sidebar-btn" data-section="visits">ğŸ“… Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©</button>
</div>

<!-- âœ… Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
<main>
  <div id="main-content" class="card">
    <h2>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„...</h2>
    <p class="note">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŒ ÙŠØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØµÙØ­Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ø·ÙÙ„.</p>
  </div>
</main>

<!-- âœ… Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª -->
<script type="module">
  import { db } from './firebase-init.js';
  import { doc, getDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

  // Ø§Ø³ØªØ®Ø±Ø§Ø¬ ID Ø§Ù„Ø·ÙÙ„ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
  const urlParams = new URLSearchParams(window.location.search);
  const childId = urlParams.get("child");

  const content = document.getElementById("main-content");
  const buttons = document.querySelectorAll(".sidebar-btn");

  // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©
  buttons.forEach(btn => {
    btn.addEventListener("click", () => {
      buttons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const section = btn.dataset.section;
      renderSection(section);
    });
  });

  async function renderSection(section) {
    switch (section) {
      case "home":
        content.innerHTML = `<h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ… ğŸ‘‹</h2><p class="note">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©.</p>`;
        break;

      case "info":
        const ref = doc(db, "children", childId);
        const snap = await getDoc(ref);
        if (!snap.exists()) {
          content.innerHTML = `<p class="note">â— Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø·ÙÙ„.</p>`;
        } else {
          const data = snap.data();
          content.innerHTML = `
            <h2>âš™ï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙÙ„</h2>
            <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${data.name || "â€”"}</p>
            <p><strong>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ:</strong> ${data.childCivilId || "â€”"}</p>
            <p><strong>Ø§Ù„Ø·ÙˆÙ„:</strong> ${data.height || "â€”"} Ø³Ù…</p>
            <p><strong>Ø§Ù„ÙˆØ²Ù†:</strong> ${data.weight || "â€”"} ÙƒØ¬Ù…</p>
          `;
        }
        break;

      case "measure":
        content.innerHTML = `<h2>ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</h2><p>Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù‡Ù†Ø§...</p>`;
        break;

      case "meals":
        content.innerHTML = `<h2>ğŸ½ï¸ ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ø·ÙÙ„</h2><p>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ù‚Ø±ÙŠØ¨Ù‹Ø§.</p>`;
        break;

      case "reports":
        content.innerHTML = `<h2>ğŸ“Š ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø³ÙƒØ±</h2><p>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ø¶ÙŠØ±...</p>`;
        break;

      case "doctor":
        content.innerHTML = `<h2>ğŸ§‘â€âš•ï¸ Ø§Ù„Ø·Ø¨ÙŠØ¨</h2><p>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø³ØªÙØ¹Ø±Ø¶ Ù‡Ù†Ø§.</p>`;
        break;

      case "visits":
        content.innerHTML = `<h2>ğŸ“… Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©</h2><p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª ÙˆØªÙØ§ØµÙŠÙ„Ù‡Ø§ Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ù‡Ù†Ø§.</p>`;
        break;
    }
  }

  // Ø£ÙˆÙ„ ØªØ­Ù…ÙŠÙ„
  renderSection("home");
</script>
</body>
</html>
